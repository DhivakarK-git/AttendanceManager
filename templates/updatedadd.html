{% load static %}
<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <meta name="author" content="Mark Otto, Jacob Thornton, and Bootstrap contributors">
    <meta name="generator" content="Jekyll v4.1.1">
    <title>SMART ATTENDANCE MANAGER</title>

    <link rel="canonical" href="https://getbootstrap.com/docs/4.5/examples/dashboard/">

    <!-- Bootstrap core CSS -->
<link href="{% static 'assets/dist/css/bootstrap.min.css'%}" rel="stylesheet">

    <style>
      .bd-placeholder-img {
        font-size: 1.125rem;
        text-anchor: middle;
        -webkit-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        user-select: none;
      }

      @media (min-width: 768px) {
        .bd-placeholder-img-lg {
          font-size: 3.5rem;
        }
      }

      .switch {
      	position: relative;
      	display: block;
      	vertical-align: top;
      	width: 100px;
      	height: 30px;
      	padding: 3px;
      	margin: 0 10px 10px 0;
      	background: linear-gradient(to bottom, #eeeeee, #FFFFFF 25px);
      	background-image: -webkit-linear-gradient(top, #eeeeee, #FFFFFF 25px);
      	border-radius: 18px;
      	box-shadow: inset 0 -1px white, inset 0 1px 1px rgba(0, 0, 0, 0.05);
      	cursor: pointer;
      	box-sizing:content-box;
      }
      .switch-input {
      	position: absolute;
      	top: 0;
      	left: 0;
      	opacity: 0;
      	box-sizing:content-box;
      }
      .switch-label {
      	position: relative;
      	display: block;
      	height: inherit;
      	font-size: 12px;
      	text-transform: uppercase;
      	background: #eceeef;
      	border-radius: inherit;
      	box-shadow: inset 0 1px 2px rgba(0, 0, 0, 0.12), inset 0 0 2px rgba(0, 0, 0, 0.15);
      	box-sizing:content-box;
      }
      .switch-label:before, .switch-label:after {
      	position: absolute;
      	top: 50%;
      	margin-top: -.5em;
      	line-height: 1;
      	-webkit-transition: inherit;
      	-moz-transition: inherit;
      	-o-transition: inherit;
      	transition: inherit;
      	box-sizing:content-box;
      }
      .switch-label:before {
      	content: attr(data-off);
      	right: 11px;
      	color: #666666;
      	text-shadow: 0 1px rgba(255, 255, 255, 0.5);
      }
      .switch-label:after {
      	content: attr(data-on);
      	left: 11px;
      	color: #FFFFFF;
      	text-shadow: 0 1px rgba(0, 0, 0, 0.2);
      	opacity: 0;
      }
      .switch-input:checked ~ .switch-label {
      	background: #dd1800;
      	box-shadow: inset 0 1px 2px rgba(0, 0, 0, 0.15), inset 0 0 3px rgba(0, 0, 0, 0.2);
      }
      .switch-input:checked ~ .switch-label:before {
      	opacity: 0;
      }
      .switch-input:checked ~ .switch-label:after {
      	opacity: 1;
      }
      .switch-handle {
      	position: absolute;
      	top: 4px;
      	left: 4px;
      	width: 28px;
      	height: 28px;
      	background: linear-gradient(to bottom, #FFFFFF 40%, #f0f0f0);
      	background-image: -webkit-linear-gradient(top, #FFFFFF 40%, #f0f0f0);
      	border-radius: 100%;
      	box-shadow: 1px 1px 5px rgba(0, 0, 0, 0.2);
      }
      .switch-handle:before {
      	content: "";
      	position: absolute;
      	top: 50%;
      	left: 50%;
      	margin: -6px 0 0 -6px;
      	width: 12px;
      	height: 12px;
      	background: linear-gradient(to bottom, #eeeeee, #FFFFFF);
      	background-image: -webkit-linear-gradient(top, #eeeeee, #FFFFFF);
      	border-radius: 6px;
      	box-shadow: inset 0 1px rgba(0, 0, 0, 0.02);
      }
      .switch-input:checked ~ .switch-handle {
      	left: 74px;
      	box-shadow: -1px 1px 5px rgba(0, 0, 0, 0.2);
      }

      /* Transition
      ========================== */
      .switch-label, .switch-handle {
      	transition: All 0.3s ease;
      	-webkit-transition: All 0.3s ease;
      	-moz-transition: All 0.3s ease;
      	-o-transition: All 0.3s ease;
      }

	.demo select {
		border: 0 !important;  /*Removes border*/
		-webkit-appearance: none;  /*Removes default chrome and safari style*/
		-moz-appearance: none; /* Removes Default Firefox style*/
        appearance:none;
		background: #5c95b8 url(img/select-arrow.png) no-repeat 90% center;
		width: 100px; /*Width of select dropdown to give space for arrow image*/
		text-indent: 0.01px; /* Removes default arrow from firefox*/
		text-overflow: "";  /*Removes default arrow from firefox*/ /*My custom style for fonts*/
		color: #FFF;
		padding: 5px;
	}


    </style>
    <!-- Custom styles for this template -->
    <link href="{% static 'css/dashboard.css' %}" rel="stylesheet">
  </head>
  <body>
    <nav class="navbar navbar-dark sticky-top flex-md-nowrap p-0 shadow" style="background-color: #5c95b8;">
  <a class="navbar-brand" href="#">
    <img src="{% static 'img/logow.png' %}" width="25" height="25" class="d-inline-block align-top" alt="">
    SA
  </a>
  <nav class="navbar navbar-dark p-1">
  <span class="navbar-text">
    FACULTY ACCOUNT
  </span>
</nav>
  <ul class="navbar-nav px-3">
    <li class="nav-item text-nowrap">
      <a class="nav-link" href={% url 'logout'  %}>Log Out <span data-feather="log-out"></span></a>
    </li>
  </ul>
</nav>

<div class="container-fluid">
  <div class="row">
    <nav id="sidebarMenu" class="col-md-3 col-lg-2 d-md-block bg-light sidebar collapse">
      <div class="sidebar-sticky pt-3">
        <ul class="nav flex-column">
          <li class="nav-item">
		  <a class="nav-link" href={% url 'updatedindex'  %}>
              <span data-feather="home"></span>
              Home <span class="sr-only">(current)</span>
            </a>
          </li>
		  <li class="nav-item">
		  <a class="nav-link" href={% url 'updatedprofile'  %}>
              <span data-feather="user"></span>
              Profile <span class="sr-only"></span>
            </a>
          </li>

    <p>
    <a class="nav-link active" data-toggle="collapse" data-target="#collapseExample" aria-expanded="true" aria-controls="collapseExample">
    <span data-feather="calendar"></span>
    Attendance <span class="sr-only"></span>
    </a>
    </p>
    <div class="collapse" id="collapseExample">
    <div class="card card-body">
    {% if clas%}
    <form class="demo" action={% url 'updatedadd'  %} method="POST">
    {% csrf_token %}
    <select name="classg">
    {% for i in clas %}
    <option value="{{i.0}}${{i.1}}">{{i.0}} {{i.1}}</option>
    {% endfor %}
    </select><br><br>
    <input value='GO' type="submit">
    </form>
    {% else %}
    <h8>Currently there are no Courses or Classes Assigned to you</h8>
    {% endif %}
    </div>
    </div>
        </ul>
      </div>
    </nav>

    <main role="main" class="col-md-9 ml-sm-auto col-lg-10 px-md-4">
      <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
          <h3>{{dept.dept_id}} {{clat.class_id}}</h3>
          <h3>{{cout.course_name}}</h3>
          <h3>{{cout.course_id}}</h3>
      </div>

	  <div class="container" style="margin-top:30px">
  <div class="card">
   <div class="card-header">
      <div class="row">
        <div class="col-md-9">Attendance List</div>
        <div class="col-md-3" align="right">
          <button type="button" id="add_button" class="btn btn-danger btn-sm" data-toggle="modal" data-target="#exampleModalCenter">Add <span data-feather="plus-square"></button>
          <button type="button" id="edit_button" class="btn btn-success btn-sm" data-toggle="modal" data-target="#exampleModal">Edit <span data-feather="edit"></button>
          <form action={% url 'fac_report'  %} method="POST" style="display:inline;">{% csrf_token %}<button type=submit name={{clat.class_id}}${{cout.course_id}} class="btn btn-info btn-sm" style="display:inline;">Report <span data-feather="download"></button></form>
        </div>
<div class="modal fade" id="exampleModalCenter" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLongTitle">Add Attendance</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
  <div class="modal-body">
  <form action="" method="post">
    {% csrf_token %}
    <div class="modal-body">
  <div class="form-group row">
    <label for="date" class="col-sm-4 col-form-label">Attendance Date</label>
    <div class="col-sm-6">
      <input type="date" name="bate" id="date" class="form-control" min="2020-06-06" max="2021-03-31" required>
    <span class="validity"></span>
    </div>
	<div class="card-body">
    <div class="table-responsive">
    <table class="table table-striped table-bordered" id="attendance_table">
		<thead>
			<tr>
				<th>Student Name</th>
				<th>Roll Number</th>
				<th>Status</th>
			</tr>
		</thead>

      <tbody>
      {% for stud1 in stud %}
			<tr>
				<td>{{stud1.f_name}} {{stud1.l_name}}</td>
				<td>{{stud1.stud_id}}</td>
				<td>
      <label class="switch">
    	<input type="checkbox" name="{{stud1.stud_id}}" class="switch-input">
    	<span class="switch-label" data-off="Present" data-on="Absent"></span>
    	<span class="switch-handle"></span>
    </label>
			</td>
      </tr>
      {% endfor %}
      </tbody>
     </table>
    </div>
    <button type="submit" class="btn btn-primary" >Save changes</button>
   </div>


  </div>
</div>
  </form>
      </div>
    </div>
  </div>
</div>
<div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLongTitle">Edit Attendance</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
  <div class="modal-body">
  <form action={% url 'editatt'  %} method="post">
    {% csrf_token %}
    <div class="modal-body">
  <div class="form-group row">
    <label for="date" class="col-sm-4 col-form-label">Attendance Date</label>
    <div class="col-sm-6">
      <input type="date" name="bate" id="date" class="form-control" min="2020-06-06" max="2021-03-31" required>
    <span class="validity"></span>
    </div>
	<div class="card-body">
    <div class="table-responsive">
    <table class="table table-striped table-bordered" id="attendance_table">
		<thead>
			<tr>
				<th>Student Name</th>
				<th>Roll Number</th>
				<th>Status</th>
			</tr>
		</thead>

      <tbody>
      {% for stud1 in stud %}
			<tr>
				<td>{{stud1.f_name}} {{stud1.l_name}}</td>
				<td>{{stud1.stud_id}}</td>
				<td>
      <label class="switch">
    	<input type="checkbox" name="{{stud1.stud_id}}" class="switch-input">
    	<span class="switch-label" data-off="Change" data-on="Changed"></span>
    	<span class="switch-handle"></span>
      </label>
			</td>
      </tr>
      {% endfor %}
      </tbody>
     </table>
    </div>
    <button type="submit" class="btn btn-primary" >Save changes</button>
   </div>


  </div>
</div>
  </form>
      </div>
    </div>
  </div>
</div>
        </div>
      </div>
    </div>
    {% if messages %}
<div class="span12">
{% for message in messages %}
    <div class="alert alert-{{ message.tags }}">
        {{ message|safe }}
    </div>
{% endfor %}
</div>
{% endif %}
   <div class="card-body">
    <div class="table-responsive">
        <span id="message_operation"></span>
     <table class="table table-striped table-bordered" id="attendance_table">
      <thead>
       <tr>
        <th>Student Name</th>
        <th>Roll Number</th>
        <th>Attendance Date</th>
        <th>Attendance Status</th>
       </tr>
      </thead>
      <tbody>
            {% for att in atte %}
            {% if att.stud_id in stud %}
            {% if att.presence %}
            <tr>
              <td>{{att.stud_id.f_name}} {{att.stud_id.l_name}}</td>
              <td>{{att.stud_id.stud_id}}</td>
              <td>{{att.date}}</td>
              <td><button type="button" name="create_report" id="create_report" class="btn btn-success btn-sm">Present</button></td>
            </tr>
            {% else %}
            <tr>
              <td>{{att.stud_id.f_name}} {{att.stud_id.l_name}}</td>
              <td>{{att.stud_id.stud_id}}</td>
              <td>{{att.date}}</td>
              <td><button type="button" id="report_button" class="btn btn-danger btn-sm">Absent</button></td>
            </tr>
            {% endif %}
            {% endif %}
            {% endfor %}
      </tbody>
     </table>
    </div>
   </div>
  </div>
</div>
    </main>
  </div>
</div>
<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
      <script>window.jQuery || document.write('<script src="assets/js/vendor/jquery.slim.min.js"><\/script>')</script>
	  <script src="{% static 'assets/dist/js/bootstrap.bundle.min.js' %}"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/feather-icons/4.9.0/feather.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.7.3/Chart.min.js"></script>
		<script src="{% static 'js/dashboard.js' %}"></script></body>
</html>
